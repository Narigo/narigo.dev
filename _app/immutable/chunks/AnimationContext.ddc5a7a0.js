import{s as A,r as g,u as T,v as p,w as x,a6 as k,o as E,a7 as L}from"./scheduler.7b4a0948.js";import{S as b,i as C,a as D,t as y}from"./index.38f4d462.js";import{h as w}from"./singletons.6ae46b21.js";import{w as N}from"./index.20f3aaac.js";const S=w("before_navigate");function q(s){let i;const r=s[2].default,e=g(r,s,s[1],null);return{c(){e&&e.c()},l(n){e&&e.l(n)},m(n,a){e&&e.m(n,a),i=!0},p(n,[a]){e&&e.p&&(!i||a&2)&&T(e,r,n,n[1],i?x(r,n[1],a,null):p(n[1]),null)},i(n){i||(D(e,n),i=!0)},o(n){y(e,n),i=!1},d(n){e&&e.d(n)}}}let c={};function H(s,i,r){let{$$slots:e={},$$scope:n}=i,{name:a}=i;c[a]={current:0,started:!1,nextTimer:null,animations:[]};const t=c[a],f=N(!1),l=()=>{t.current<t.animations.length&&t.animations[t.current].animation(),t.current===t.animations.length&&document.removeEventListener("click",l)};return k("AnimationContext",{animationsDone:f,createAnimation:(o,m,v)=>{let h=t.animations.length;const d=()=>{if(t){if(h<=t.current){const{nextTimer:_}=t;_!==null&&(clearTimeout(_),t.nextTimer=null),o.set(!0),t.current+=1;const u=t.current<t.animations.length?t.animations[t.current]:void 0;u?t.nextTimer=setTimeout(u.animation,u.delayNext):(f.set(!0),document.removeEventListener("click",l))}}else o.set(!0)};t.animations.push({delayNext:v,animation:d}),t.started||(t.started=!0,t.nextTimer=setTimeout(d,m))},finishAllAnimations:()=>{t.animations.slice(t.current).forEach(o=>{o.animation()})}}),S(()=>{if(l!==null&&document.removeEventListener("click",l),a){const o=c[a],{nextTimer:m}=o;m!==null&&clearTimeout(m)}c={}}),E(()=>{document.addEventListener("click",l)}),L(()=>{document.removeEventListener("click",l)}),s.$$set=o=>{"name"in o&&r(0,a=o.name),"$$scope"in o&&r(1,n=o.$$scope)},[a,n,e]}class G extends b{constructor(i){super(),C(this,i,H,q,A,{name:0})}}export{G as A};
